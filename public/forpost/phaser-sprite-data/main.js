
var Blocks = {};

Blocks.setup = function (game) {

    // create a data object for game if it is not there
    game.data = game.data || {};

    // create or overwrite game.data.blocks
    game.data.blocks = {
        group: game.add.group()
    };

};

// make a sprite sheet
Blocks.mkSheet = function (game) {

    // sprite sheet generated by canvas
    var canvas = document.createElement('canvas'),
    ctx = canvas.getContext('2d');
    canvas.width = 64;
    canvas.height = 32;

    // blue frame
    ctx.fillStyle = '#0000ff';
    ctx.fillRect(0, 0, 32, 32);

    // red frame
    ctx.fillStyle = '#ff0000';
    ctx.fillRect(32, 0, 32, 32);

    game.cache.addSpriteSheet('sheet-block', null, canvas, 32, 32, 2, 0, 0);

};

Blocks.newDataObject = function (options) {

    return {

        dx: 1,
        dy: 0

    };

};

Blocks.createSprite = function (game, options) {

    options = options || {};
    options.x = options.x === undefined ? 0 : options.x;
    options.y = options.y === undefined ? 0 : options.y;

    var sprite = game.data.blocks.group.create(options.x, options.y, 'sheet-block');

    sprite.data = Blocks.newDataObject(options);

};

var game = new Phaser.Game(320, 240, Phaser.AUTO, 'gamearea');

game.state.add('boot', {

    create: function () {

        Blocks.setup(game);

        Blocks.mkSheet(game);

        game.state.start('demo', false, false);

    }

});

game.state.add('demo', {

    create: function () {

        Blocks.createSprite(game, {
            x: 5,
            y: 5
        });

    },

    update: function () {}

});

game.state.start('boot');
