
var mkSheet = function () {

    // sprite sheet generated by canvas
    var canvas = document.createElement('canvas'),
    ctx = canvas.getContext('2d');
    canvas.width = 96;
    canvas.height = 32;

    // green block
    ctx.fillStyle = '#00ff00';
    ctx.fillRect(0, 0, 32, 32);

    // red block
    ctx.fillStyle = '#ff0000';
    ctx.fillRect(32, 0, 32, 32);

    // blue block
    ctx.fillStyle = '#0000ff';
    ctx.fillRect(64, 0, 32, 32);

    // add a single sheet to cache
    game.cache.addSpriteSheet('sheet-blocks', null, canvas, 32, 32, 3, 0, 0);

};

var game = new Phaser.Game(320, 240, Phaser.AUTO, 'gamearea');

game.state.add('boot', {

    create: function () {

        // make the sheet
        mkSheet(game);

        // create a tilemap
        var map = game.add.tilemap(null, 32, 32, 12, 8);

        // add the Sheet I want to use
        map.addTilesetImage('sheet-blocks');

        // create a layer
        map.create('my-layer', 12, 8, 32, 32);

        map.putTile(0, 0, 0);
        map.putTile(1, 1, 1);
        map.putTile(2, 2, 2);

        console.log(map);

    },

    update: function () {}

});

game.state.start('boot');
